<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>District 34 Verifier</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding: 20px; text-align: center; }
    .box {
      background: white; padding: 30px; border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 400px; margin: 0 auto;
      border: 1px solid #ccc;
    }
    input { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; }
    button { width: 100%; padding: 12px; background: #003366; color: white; border: none; font-weight: bold; cursor: pointer; border-radius: 4px; }
    button:hover { background: #002244; }
    #msg { margin-top: 20px; padding: 15px; border-radius: 5px; display: none; text-align: left; }
    .ok { background: #eaffea; color: #004d40; border: 1px solid #004d40; }
    .err { background: #fff0f0; color: #c00; border: 1px solid #c00; }
  </style>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAyduKVB1kDinuz3N43bUIm9CDiihkhlog&libraries=geometry&v=weekly"></script>
</head>
<body>

<div class="box">
  <h3 style="margin-top:0; color:#003366;">Am I in District 34?</h3>
  <input type="text" id="addr" placeholder="Enter your full address..." onkeydown="if(event.key==='Enter') checkAddress()">
  <button onclick="checkAddress()">Verify Address</button>
  <div id="msg"></div>
</div>

<script>
  let districtPolygon = null;

  // 1. Define the District Shape (Your GeoJSON)
  function loadDistrictData() {
    // --- PASTE YOUR GEOJSON HERE ---
    const geoJsonData = PASTE_THE_HUGE_TEXT_FROM_GEOJSON_IO_HERE ;
    // -------------------------------

    if (!geoJsonData || !geoJsonData.features) return;

    // Convert GeoJSON to Google Maps Polygon
    const coords = geoJsonData.features[0].geometry.coordinates[0].map(pt => {
      return { lat: pt[1], lng: pt[0] };
    });

    districtPolygon = new google.maps.Polygon({ paths: coords });
  }

  function checkAddress() {
    const address = document.getElementById('addr').value;
    const msg = document.getElementById('msg');
    
    if (!address || address.length < 5) { alert("Please enter a full address"); return; }
    if (!districtPolygon) loadDistrictData(); // Load shape if not ready

    msg.style.display = 'block';
    msg.innerHTML = 'Checking map boundaries...';
    msg.className = '';

    // 2. Geocode the Address (Find the dot)
    const geocoder = new google.maps.Geocoder();
    geocoder.geocode({ 'address': address }, function(results, status) {
      
      if (status === 'OK') {
        const location = results[0].geometry.location; // The Dot
        
        // 3. The Math Check: Is Dot inside Shape?
        const isInside = google.maps.geometry.poly.containsLocation(location, districtPolygon);

        if (isInside) {
          msg.className = 'ok';
          msg.innerHTML = '<b>✅ YES! You are in District 34.</b><br><br>Andreas is fighting for you.<br><a href="https://secure.actblue.com/donate/andreas-migias-1" target="_blank" style="font-weight:bold; color:#004d40;">Donate Here</a>';
        } else {
          msg.className = 'err';
          msg.innerHTML = '<b>❌ You are outside District 34.</b><br><small>Your home is outside the district lines.</small><br><br><a href="https://secure.actblue.com/donate/andreas-migias-1" target="_blank" style="color:#c00;">Donate Anyway</a>';
        }

      } else {
        msg.className = 'err';
        msg.innerHTML = '<b>Error:</b> Could not find that address. Try adding City and Zip.';
      }
    });
  }

  // Load data immediately
  loadDistrictData();
</script>

</body>
</html>
